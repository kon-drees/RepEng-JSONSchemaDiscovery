# RepEng: Replication Package of the Project JSONSchemaDiscovery

This site provides the replication package of the project [JSONSchemaDiscovery](https://github.com/feekosta/JSONSchemaDiscovery). 
The project consists of two containers: one for the project itself and another for the MongoDB database.


## What you need installed to run this project:
* [Docker](https://www.docker.com/)
* [Docker Compose](https://docs.docker.com/compose/)

## Building the Docker image:

1. Clone the repository to your local machine;
   ```bash
     git clone https://github.com/kon-drees/RepEng-JSONSchemaDiscovery.git
   ``` 
2. In the project's folder run the following command to compose and run  the containers:
   ```bash
    docker-compose up --build
   ```




## Performing the smoke test:

The smoke test is performed inside the container.
It loads data in the MongoDB container and runs the Schema Discovery tool on the data. The smoke test is successful if the tool runs without errors.


1. After the containers are up and running, open a new terminal and run the following command to access the container:
    ```bash
   docker exec -it reproduction /bin/bash
    ```
    >    **Note:** The project container builds a nodejs application. Therefore you need to check if the application is running before performing the smoke test. You can check it if the node applications logs are being printed in the terminal and the Database and the API are ready.


2. In the container's terminal, run the following command to perform the smoke test:
    ```bash
   ./smoke.sh
    ```
   
3. The smoke test was successful if the following message is printed in the terminal:
    > Smoke test was successful

## Generating the project report:

The Docker container clones the project report and generates it using makefile.

1. To enter the container and report directory, you need to manually execute the following command:
   ```bash
   docker exec -it reproduction /bin/bash -c "cd /home/repro/git-repos/RepEng-Reproduceability-Paper && /bin/bash"
   ```
   This command will open a bash shell inside the container and change the directory to where the report repository is cloned.

2. In the container's terminal, run the following command to generate the report:
   ```bash
   make report
   ```
   

3. And to clean the report directory:
   ```bash
   make clean
   ```
   This will typically delete any files that were generated by make report, returning the directory to its original state.
